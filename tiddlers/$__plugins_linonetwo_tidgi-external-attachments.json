[
    {
        "title": "$:/plugins/linonetwo/tidgi-external-attachments",
        "name": "External Attachments for TidGi app",
        "description": "External attachments for TidGi Desktop App, drag&drop image/binary file to wiki, and become skinny tiddler (a pointer to actural file). ",
        "list": "readme settings",
        "plugin-type": "plugin",
        "author": "LinOnetwo",
        "version": "1.0.0",
        "dependents": "",
        "type": "application/json",
        "text": "{\"tiddlers\":{\"$:/config/ExternalAttachments/Enable\":{\"title\":\"$:/config/ExternalAttachments/Enable\",\"text\":\"yes\"},\"$:/config/ExternalAttachments/UseAbsoluteForDescendents\":{\"title\":\"$:/config/ExternalAttachments/UseAbsoluteForDescendents\",\"text\":\"no\"},\"$:/config/ExternalAttachments/UseAbsoluteForNonDescendents\":{\"title\":\"$:/config/ExternalAttachments/UseAbsoluteForNonDescendents\",\"text\":\"yes\"},\"$:/plugins/linonetwo/tidgi-external-attachments/readme\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/readme\",\"text\":\"! Introduction\\n\\nThis plugin provides support for importing tiddlers as external attachments. That means that instead of importing binary files as self-contained tiddlers, they are imported as \\\"skinny\\\" tiddlers that reference the original file via the ''_canonical_uri'' field. This reduces the size of the wiki and thus improves performance. However, it does mean that the wiki is no longer fully self-contained.\\n\\n! Compatibility\\n\\nThis plugin only works when using TiddlyWiki with platforms such as TiddlyDesktop/TidGi Desktop that support the ''path'' attribute for imported/dragged files (provided by app). And also need the app supports `file://` protocol of link.\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/settings\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/settings\",\"text\":\"When used on platforms that provide the necessary support (such as ~TiddlyDesktop), you can optionally import binary files as external tiddlers that reference the original file via the ''_canonical_uri'' field.\\n\\nBy default, a relative path is used to reference the file. Optionally, you can specify that an absolute path is used instead. You can do this separately for \\\"descendent\\\" attachments -- files that are contained within the directory containing the wiki -- vs. \\\"non-descendent\\\" attachments.\\n\\n<$checkbox tiddler=\\\"$:/config/ExternalAttachments/Enable\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\"> <$link to=\\\"$:/config/ExternalAttachments/Enable\\\">Enable importing binary files as external attachments</$link> </$checkbox>\\n\\n<$checkbox tiddler=\\\"$:/config/ExternalAttachments/UseAbsoluteForDescendents\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\"> <$link to=\\\"$:/config/ExternalAttachments/UseAbsoluteForDescendents\\\">Use absolute paths for descendent attachments (inside wiki folder)</$link> </$checkbox>\\n\\n<$checkbox tiddler=\\\"$:/config/ExternalAttachments/UseAbsoluteForNonDescendents\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\"> <$link to=\\\"$:/config/ExternalAttachments/UseAbsoluteForNonDescendents\\\">Use absolute paths for non-descendent attachments (anywhere on the computer)</$link> </$checkbox>\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/startup.js\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/startup.js\",\"text\":\"const ENABLE_EXTERNAL_ATTACHMENTS_TITLE=\\\"$:/config/ExternalAttachments/Enable\\\",USE_ABSOLUTE_FOR_DESCENDENTS_TITLE=\\\"$:/config/ExternalAttachments/UseAbsoluteForDescendents\\\",USE_ABSOLUTE_FOR_NON_DESCENDENTS_TITLE=\\\"$:/config/ExternalAttachments/UseAbsoluteForNonDescendents\\\";function makePathRelative(e,t,n){((n=n||{}).isWindows||$tw.platform.isWindows)&&(\\\"/\\\"!==(e=e.replace(/\\\\\\\\/g,\\\"/\\\")).charAt(0)&&(e=\\\"/\\\"+e),\\\"//\\\"===e.substring(0,2)&&(e=e.substring(1)));var s=e.split(\\\"/\\\"),o=t.split(\\\"/\\\"),i=[];$tw.utils.each(s,function(e,t){s[t]=encodeURI(e)});for(var r,a=0;a<s.length&&a<o.length&&s[a]===o[a];)a+=1;if(1===a||n.useAbsoluteForNonDescendents&&a<o.length||n.useAbsoluteForDescendents&&a===o.length)return e;for(r=a;r<o.length-1;r++)i.push(\\\"..\\\");for(r=a;r<s.length;r++)i.push(s[r]);return i.join(\\\"/\\\")}exports.name=\\\"tidgi-external-attachments\\\",exports.platforms=[\\\"browser\\\"],exports.after=[\\\"startup\\\"],exports.synchronous=!0,exports.startup=function(){$tw.hooks.addHook(\\\"th-importing-file\\\",function(e){if(\\\"workspaceID\\\"in window.meta&&e.isBinary&&e.file.path&&\\\"yes\\\"===$tw.wiki.getTiddlerText(ENABLE_EXTERNAL_ATTACHMENTS_TITLE,\\\"\\\")){let t=makePathRelative(e.file.path,document.location.pathname,{useAbsoluteForNonDescendents:\\\"yes\\\"===$tw.wiki.getTiddlerText(USE_ABSOLUTE_FOR_NON_DESCENDENTS_TITLE,\\\"\\\"),useAbsoluteForDescendents:\\\"yes\\\"===$tw.wiki.getTiddlerText(USE_ABSOLUTE_FOR_DESCENDENTS_TITLE,\\\"\\\")});return t=`file://${t}`,e.callback([{title:e.file.name,type:e.type,_canonical_uri:t}]),!0}return!1})};\",\"type\":\"application/javascript\",\"module-type\":\"startup\"}}}"
    }
]